<main class="main-container">
  <mat-drawer-container style="height: 100%">
    <mat-drawer
      #sidebar
      [(opened)]="panelVisibility"
      mode="side"
      style="width: 17.5%"
    >
      <app-sidebar
        (panelVisibilityIconClick)="sidebar.toggle()"
        [title]="'CHAT A.I+'"
      >
        <div
          class="sidebar--actions"
          panel-actions
        >
          <button
            class="new-chat-button"
            mat-flat-button
            (click)="startNewChat()"
          >
            <mat-icon>add</mat-icon>
            New chat
          </button>

          <mat-checkbox
            [(ngModel)]="shouldFail"
            [matTooltip]="!shouldFail() ? 'Enable bot fail' : 'Disable bot fail'"
            matTooltipClass="tooltip"
          />
        </div>

        <div
          style="height: 100%;"
          panel-content
        >
          <chat-history/>
        </div>
      </app-sidebar>
    </mat-drawer>
    <mat-drawer-content>
      <div class="main-wrapper">

        <div class="main-section">
          <app-button
            (click)="sidebar.toggle()"
            [iconMode]="true"
            [ngStyle]="{display: panelVisibility() ? 'none' : 'initial'}"
            class="show-chat-button"
            tooltip="Show sidebar"
          >
            <mat-icon icon>flip_to_front</mat-icon>
          </app-button>

          <div class="title-wrapper">
            <div style="height: auto">
              <h1 class="app-title">CHAT AI</h1>
              <div class="app-title--underline"></div>
            </div>
          </div>

          <div class="chat-section">
            <chat-window (refreshButtonClick)="refetchBotMessage($event)"/>
            <chat-actions
              (querySend)="onUserQuerySend($event)"
            />
          </div>
        </div>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>

</main>
